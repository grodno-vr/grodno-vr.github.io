["866f99b11b5d90e29626b96bc3dc80f5465550fd","8196152adf7312c89b3d5aa9ff4444f48f3581c8",["./BaseView","../Utils/merge","../Utils/StereoOffsetRepeats","../Utils/HPano","../Utils/CubePano","../Utils/RCTBindedResource","ovrui","three","../Utils/Yoga.bundle","./Prefetch"],[97,192,299,434,475,528,578,661,743,843],{"version":3,"sources":["/home/archik/projects/grodno-vr.github.io/node_modules/react-vr-web/js/Views/Pano.js"],"names":["OVRUI","THREE","Yoga","panoRayCast","inverseMatrix","Matrix4","ray","Ray","sphere","Sphere","Vector3","intersectionPoint","intersectionPointWorld","raycaster","intersects","getInverse","matrixWorld","copy","applyMatrix4","intersect","intersectSphere","distance","origin","distanceTo","near","far","push","point","clone","object","sphereGeometry","undefined","cubeGeometry","RCTPano","guiSys","rnctx","SphereGeometry","_tintOpacity","_styleOpacity","_sphereGeometry","_cubeGeometry","_material","StereoBasicTextureMaterial","color","side","DoubleSide","_globe","Mesh","onBeforeRender","renderer","scene","camera","geometry","material","group","viewID","stereoOffsetRepeats","uniforms","stereoOffsetRepeat","value","_rightEnvMap","envMap","_leftEnvMap","needsUpdate","raycast","bind","rotation","y","Math","PI","view","UIView","zOffset","add","_localResource","RCTResourceManager","globeOnUpdate","Object","defineProperty","props","set","setSource","style","opacity","transparent","parseInt","toString","slice","projScreenMatrix","modelViewMatrix","multiplyMatrices","matrixWorldInverse","projectionMatrix","update","maxDepth","tile","dispose","onUpdate","layout","scale","z","useUV","UIManager","_rnctx","callFunction","getTag","loadRemoteTexture","url","onLoad","onError","onLoadDisposable","texture","_needsDispose","onProgress","isCached","cachedTexture","getFromCache","Array","isArray","loader","CubeTextureLoader","setCrossOrigin","load","TextureLoader","onLoadOrChange","_currentSource","x","map","type","enableMipmaps","generateMipmaps","minFilter","LinearFilter","wrapS","ClampToEdgeWrapping","wrapT","cubeTexture","isCubeTexture","flatTexture","_nextRightEnvMap","_nextLeftEnvMap","stereoFormat","stereo","console","warn","_numTexturesToLoad","length","uri","urls","unregister","isValidUrl","visible","YGNode","getDisplay","DISPLAY_NONE","NativeProps","source"],"mappings":"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","file":"Pano.js","sourcesContent":[""]}]