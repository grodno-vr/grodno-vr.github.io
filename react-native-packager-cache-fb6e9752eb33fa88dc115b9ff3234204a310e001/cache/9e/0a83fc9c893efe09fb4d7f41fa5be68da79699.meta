["8bd366969c736279264fd8fce2318f610a39f6fa","1e8260e6c2efe12e4d7ac9acac2d9a9c0b6881a5",["../ThreeShim"],[6541],{"version":3,"sources":["/home/archik/projects/grodno-vr.github.io/node_modules/ovrui/lib/Control/VREffect.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_ThreeShim","require","_ThreeShim2","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","TypeError","DEFAULT_LEFT_BOUNDS","DEFAULT_RIGHT_BOUNDS","leftCamera","PerspectiveCamera","layers","enable","viewID","rightCamera","leftTranslation","Vector3","rightTranslation","VREffect","renderer","vrDisplay","leftBounds","rightBounds","originalSize","getSize","originalPixelRatio","getPixelRatio","_configureRendererForVRDisplay","leftParams","getEyeParameters","rightParams","setPixelRatio","setSize","renderWidth","Math","min","renderHeight","requestPresent","_this","Promise","reject","isPresenting","resolve","source","domElement","then","exitPresent","_this2","width","height","render","scene","camera","frameData","preserveAutoUpdate","autoUpdate","updateMatrixWorld","fromArray","offset","size","leftRect","x","round","y","rightRect","setScissorTest","autoClear","clear","parent","matrixWorld","decompose","position","quaternion","scale","translateOnAxis","projectionMatrix","elements","leftProjectionMatrix","rightProjectionMatrix","backupScene","background","isStereoBackgroundReady","backgroundLeft","backgroundRight","setViewport","setScissor","submitFrame"],"mappings":"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","file":"VREffect.js","sourcesContent":[""]}]